<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>DZ_33</title>
    <style>
        .circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            position: relative;
            left: 0;
            top: 0;
        }

        .red {
            background-color: red;
        }

        .blue {
            background-color: blue;
        }
    </style>
</head>

<body>
    <!-- ПРИМЕР АНИМАЦИИ ЧЕРЕЗ SETINTERVAL (НЕ САМЫЙ ЛУЧШИЙ ВАРИАНТ ДЛЯ АНИМАЦИЙ) -->
    <div id="round" class="circle red"></div>
    <div id="secondRound" class="circle blue"></div>

    <input type="button" id="start" value="Старт / Ускорение">
    <input type="button" id="end" value="Стоп / Замедление">

    <!-- <script>
        let startDate = Date.now(); // timestamp, кол-во секунд прошедших 1970г, 1 января
        let circleRed = document.querySelector('.red');
        let circleRedRadius = getComputedStyle(circleRed).width;
        let viewPortWidth = document.body.clientWidth; // получить ширину body

        console.log('circleRedRadius', circleRedRadius);
        // getComputedStyle() позволяет получить вычисляемое свойство CSS
        let positionCircleRedLeft = getComputedStyle(circleRed).left;
        let positionCircleRedTop = getComputedStyle(circleRed).top;

        let positionCircleRedLeftCut = +positionCircleRedLeft.substring(0, positionCircleRedLeft.length - 2); // таким образом срезаем px
        let positionCircleRedTopCut = +positionCircleRedTop.substring(0, positionCircleRedTop.length - 2); // таким образом срезаем px

        let timeDuration = Date.now() - startDate;
        setInterval(function () {
            if (positionCircleRedLeftCut < viewPortWidth) {
                positionCircleRedLeftCut += timeDuration * 5;
            } else {
                positionCircleRedLeftCut = 0;
                positionCircleRedTopCut += +circleRedRadius.substring(0, circleRedRadius.length - 2);
                // console.log(positionCircleRedTopCut);
            }

            circleRed.style.left = positionCircleRedLeftCut + 'px';
            circleRed.style.top = positionCircleRedTopCut + 'px';
        }, 1000 / 60);
    </script> -->

    <script>
        let circleBlue = document.querySelector('.blue');
        let id;
        let x = 0;
        let y = 0;
        let r = 90;
        let dx = 1;
        let dy = 1;
        let dr = 0.3;

        let canvas = document.createElement("canvas");
        let ctx = canvas.getContext("2d");

        function step() {
            if ((r > 300) || (r < 90)) {
                dr *= -1;
                ctx.clearRect(0, 0, 700, 600);
            }
            r += dr;
            if ((x >= r) || (x < r * (-1))) { dx *= -1; dy *= -1; }
            x += dx;
            y = 350 + dy * Math.sqrt(Math.pow(r, 2) - Math.pow(x, 2));
            ctx.fillRect(300 + x, y - 50, 1, 1);
            circleBlue.style.left = 500 + x + 'px';
            circleBlue.style.top = y + 'px';
            id = requestAnimationFrame(step);
        }

        let start = document.querySelector('#start');
        start.addEventListener('click', () => {
            id = requestAnimationFrame(step);
        });

        let end = document.querySelector('#end');
        end.addEventListener('click', () => {
            cancelAnimationFrame(id);
        });
    </script>
</body>

</html>